---
interface Item {
    src: string;
    alt?: string;
}

interface Props {
    items: Item[];
    class?: string;
}

const { items, class: className } = Astro.props;
---

<div class:list={['photo-collage', className]}>
    {items[0] && (
        <div class="photo-item item-1">
            <img src={items[0].src} alt={items[0].alt ?? ''} loading="lazy" />
        </div>
    )}
    {items[1] && (
        <div class="photo-item item-2">
            <img src={items[1].src} alt={items[1].alt ?? ''} loading="lazy" />
        </div>
    )}
    {items[2] && (
        <div class="photo-item item-3">
            <img src={items[2].src} alt={items[2].alt ?? ''} loading="lazy" />
        </div>
    )}
    {items[3] && (
        <div class="photo-item item-4">
            <img src={items[3].src} alt={items[3].alt ?? ''} loading="lazy" />
        </div>
    )}
    {items[4] && (
        <div class="photo-item item-5">
            <img src={items[4].src} alt={items[4].alt ?? ''} loading="lazy" />
        </div>
    )}
    {items[5] && (
        <div class="photo-item item-6">
            <img src={items[5].src} alt={items[5].alt ?? ''} loading="lazy" />
        </div>
    )}
</div>

<style>
    /*
     * 6-photo masonry grid layout:
     * Uses a 4-column x 4-row grid
     *
     * Layout:
     * ┌─────────┬─────────┬─────────┐
     * │    1    │    2    │         │
     * │landscape│ square  │    3    │
     * ├────┬────┼─────────┤portrait │
     * │ 4  │ 5  │    6    │         │
     * │ sq │ sq │landscape│         │
     * └────┴────┴─────────┴─────────┘
     */
    .photo-collage {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(4, 1fr);
        gap: 8px;
        aspect-ratio: 5 / 4;
    }

    .photo-item {
        overflow: hidden;
        border-radius: 10px;
        border: 1px solid rgba(198, 202, 210, 0.6);
        background: white;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    }

    /* Item 1: Top-left landscape (2 cols, 2 rows) */
    .photo-item.item-1 {
        grid-column: 1 / 3;
        grid-row: 1 / 3;
    }

    /* Item 2: Top-middle square (1 col, 2 rows) */
    .photo-item.item-2 {
        grid-column: 3 / 4;
        grid-row: 1 / 3;
    }

    /* Item 3: Right portrait (1 col, 4 rows - full height) */
    .photo-item.item-3 {
        grid-column: 4 / 5;
        grid-row: 1 / 5;
    }

    /* Item 4: Bottom-left small (1 col, 2 rows) */
    .photo-item.item-4 {
        grid-column: 1 / 2;
        grid-row: 3 / 5;
    }

    /* Item 5: Bottom-middle-left small (1 col, 2 rows) */
    .photo-item.item-5 {
        grid-column: 2 / 3;
        grid-row: 3 / 5;
    }

    /* Item 6: Bottom-right landscape (2 cols, 2 rows) */
    .photo-item.item-6 {
        grid-column: 3 / 4;
        grid-row: 3 / 5;
    }

    .photo-item img {
        width: 100%;
        height: 100%;
        display: block;
        object-fit: cover;
        filter: saturate(0.95);
    }

    /* Hover effect */
    @media (hover: hover) {
        .photo-item {
            transition: transform 180ms ease, box-shadow 180ms ease;
        }
        .photo-item:hover {
            transform: scale(1.03);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.18);
            z-index: 1;
        }
    }

    @media (max-width: 900px) {
        .photo-collage {
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(4, 1fr);
            aspect-ratio: 3 / 4;
        }

        /* Reflow for tablet */
        .photo-item.item-1 {
            grid-column: 1 / 3;
            grid-row: 1 / 3;
        }
        .photo-item.item-2 {
            grid-column: 3 / 4;
            grid-row: 1 / 2;
        }
        .photo-item.item-3 {
            grid-column: 3 / 4;
            grid-row: 2 / 4;
        }
        .photo-item.item-4 {
            grid-column: 1 / 2;
            grid-row: 3 / 5;
        }
        .photo-item.item-5 {
            grid-column: 2 / 3;
            grid-row: 3 / 5;
        }
        .photo-item.item-6 {
            grid-column: 3 / 4;
            grid-row: 4 / 5;
        }
    }

    @media (max-width: 600px) {
        .photo-collage {
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(4, 1fr);
            aspect-ratio: 1 / 1;
            gap: 6px;
        }

        /* Stack for mobile */
        .photo-item.item-1 {
            grid-column: 1 / 3;
            grid-row: 1 / 2;
        }
        .photo-item.item-2 {
            grid-column: 1 / 2;
            grid-row: 2 / 3;
        }
        .photo-item.item-3 {
            grid-column: 2 / 3;
            grid-row: 2 / 4;
        }
        .photo-item.item-4 {
            grid-column: 1 / 2;
            grid-row: 3 / 4;
        }
        .photo-item.item-5 {
            grid-column: 1 / 2;
            grid-row: 4 / 5;
        }
        .photo-item.item-6 {
            grid-column: 2 / 3;
            grid-row: 4 / 5;
        }
    }

    @media (prefers-reduced-motion: reduce) {
        .photo-item {
            transition: none !important;
        }
    }
</style>
