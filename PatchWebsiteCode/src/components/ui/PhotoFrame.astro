---
interface Props {
    src: string;
    alt: string;
    aspectRatio?: '16/9' | '4/3' | '1/1' | '2/1';
    gridOverlay?: boolean;
    borderStyle?: 'default' | 'accent' | 'yellow';
    class?: string;
}

const {
    src,
    alt,
    aspectRatio = '16/9',
    gridOverlay = false,
    borderStyle = 'default',
    class: className
} = Astro.props;
---

<div
    class:list={[
        'photo-frame',
        `photo-frame-${borderStyle}`,
        { 'with-grid': gridOverlay },
        className
    ]}
    style={`--aspect-ratio: ${aspectRatio};`}
>
    <img src={src} alt={alt} loading="lazy" />
</div>

<style>
    .photo-frame {
        position: relative;
        border: 1px solid var(--default-border-color);
        border-radius: 2px;
        overflow: hidden;
        box-shadow: 4px 4px 0 rgba(7, 77, 207, 0.04);
        aspect-ratio: var(--aspect-ratio, 16/9);
    }

    .photo-frame-accent {
        border-color: var(--color-blue-300);
        box-shadow: 4px 4px 0 rgba(7, 77, 207, 0.08);
    }

    .photo-frame-yellow {
        border-color: rgba(255, 177, 0, 0.4);
        box-shadow: 4px 4px 0 rgba(255, 177, 0, 0.08);
    }

    .photo-frame img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center top;
        display: block;
    }

    /* Grid overlay pattern */
    .photo-frame.with-grid::after {
        content: '';
        position: absolute;
        inset: 0;
        background: repeating-linear-gradient(
            90deg,
            transparent,
            transparent 11px,
            rgba(190, 219, 255, 0.1) 11px,
            rgba(190, 219, 255, 0.1) 12px
        ),
        repeating-linear-gradient(
            0deg,
            transparent,
            transparent 11px,
            rgba(190, 219, 255, 0.1) 11px,
            rgba(190, 219, 255, 0.1) 12px
        );
        pointer-events: none;
        opacity: 0.8;
    }

    /* Hide grid overlay on smaller screens for performance */
    @media (max-width: 640px) {
        .photo-frame.with-grid::after {
            display: none;
        }
    }
</style>
