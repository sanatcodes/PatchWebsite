---
import Button from '../ui/Button.astro';

interface Props {
    quote: string;
    author: string;
    authorTitle?: string;
    photoSrc?: string;
    ctaText?: string;
    ctaHref?: string;
}

const {
    quote,
    author,
    authorTitle,
    photoSrc,
    ctaText,
    ctaHref
} = Astro.props;
---

<section class="quote-section">
    <div class="quote-wrapper">
        <div class="quote-card">
            <!-- Tape decorations -->
            <span class="tape tape-tl"></span>
            <span class="tape tape-tr"></span>

            {photoSrc && (
                <div class="quote-photo">
                    <img src={photoSrc} alt={author} />
                </div>
            )}

            <blockquote>
                <p>"{quote}"</p>
            </blockquote>

            <div class="quote-attribution">
                <cite>â€” {author}</cite>
                {authorTitle && <span class="author-title">{authorTitle}</span>}
            </div>
        </div>

        {ctaText && ctaHref && (
            <div class="quote-cta">
                <Button variant="cta" href={ctaHref}>
                    {ctaText}
                </Button>
            </div>
        )}
    </div>
</section>

<style>
    .quote-section {
        padding: 48px 24px;
        background: linear-gradient(180deg, #fafaf8 0%, #f5f5f0 100%);
    }

    .quote-wrapper {
        max-width: 600px;
        margin: 0 auto;
    }

    .quote-card {
        position: relative;
        background: #fff;
        border: 1px solid #e0e0e0;
        padding: 32px;
        box-shadow:
            2px 3px 12px rgba(0, 0, 0, 0.08),
            0 1px 3px rgba(0, 0, 0, 0.05);
        transform: rotate(-0.5deg);
    }

    /* Tape styling */
    .tape {
        position: absolute;
        width: 50px;
        height: 18px;
        background: rgba(255, 230, 150, 0.8);
        border: 1px solid rgba(200, 180, 100, 0.35);
        z-index: 2;
    }

    .tape-tl {
        top: -9px;
        left: 20px;
        transform: rotate(-12deg);
    }

    .tape-tr {
        top: -9px;
        right: 20px;
        transform: rotate(8deg);
    }

    /* Photo */
    .quote-photo {
        float: right;
        width: 90px;
        height: 90px;
        margin: 0 0 16px 20px;
        background: #fff;
        padding: 4px;
        box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.12);
        transform: rotate(3deg);
    }

    .quote-photo img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    /* Quote text */
    blockquote {
        margin: 0 0 16px;
    }

    blockquote p {
        font-family: Georgia, 'Times New Roman', serif;
        font-size: 1.3125rem;
        font-style: italic;
        color: #2a4a7a;
        line-height: 1.7;
        margin: 0;
    }

    /* Attribution */
    .quote-attribution {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    cite {
        font-family: Georgia, 'Times New Roman', serif;
        font-size: 0.95rem;
        font-style: italic;
        color: #2a4a7a;
    }

    .author-title {
        font-family: 'Courier New', monospace;
        font-size: 0.7rem;
        color: #888;
        letter-spacing: 0.03em;
    }

    /* CTA */
    .quote-cta {
        display: flex;
        justify-content: center;
        margin-top: 32px;
    }

    @media (max-width: 480px) {
        .quote-section {
            padding: 36px 16px;
        }

        .quote-card {
            padding: 24px 20px;
        }

        .quote-photo {
            width: 70px;
            height: 70px;
            margin: 0 0 12px 16px;
        }

        blockquote p {
            font-size: 1rem;
        }

        .tape {
            width: 40px;
            height: 14px;
        }
    }
</style>
